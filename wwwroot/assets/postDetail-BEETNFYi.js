import{d as P,r as n,i as B,c as g,e as s,t as l,F as z,j as U,f as V,k as $,b as H,w as O,o as d,_ as N,g as R,m as b}from"./index-BkUlVtEz.js";import{R as S}from"./request-BB6PRwq2.js";import{M as W}from"./modal-V-dFD9gs.js";const Y="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1737986543907'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='6253'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M832%20250.352L468.215%20612.354c-15.66%2015.582-40.986%2015.52-56.569-0.14-15.582-15.659-15.52-40.985%200.14-56.568L777.222%20192H626c-22.091%200-40-17.909-40-40s17.909-40%2040-40h174c61.856%200%20112%2050.144%20112%20112v174c0%2022.091-17.909%2040-40%2040s-40-17.909-40-40V250.352z%20m0%20339.909c0-22.092%2017.909-40%2040-40s40%2017.908%2040%2040V800c0%2061.856-50.144%20112-112%20112H224c-61.856%200-112-50.144-112-112V224c0-61.856%2050.144-112%20112-112h209.74c22.09%200%2040%2017.909%2040%2040s-17.91%2040-40%2040H224c-17.673%200-32%2014.327-32%2032v576c0%2017.673%2014.327%2032%2032%2032h576c17.673%200%2032-14.327%2032-32V590.26z'%20fill='%23333333'%20p-id='6254'%3e%3c/path%3e%3c/svg%3e",f="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1737792245693'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4202'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M621.674667%20408.021333c16.618667-74.24%2028.224-127.936%2034.837333-161.194666C673.152%20163.093333%20629.941333%2085.333333%20544.298667%2085.333333c-77.226667%200-116.010667%2038.378667-138.88%20115.093334l-0.586667%202.24c-13.728%2062.058667-34.72%20110.165333-62.506667%20144.586666a158.261333%20158.261333%200%200%201-119.733333%2058.965334l-21.909333%200.469333C148.437333%20407.808%20106.666667%20450.816%20106.666667%20503.498667V821.333333c0%2064.8%2052.106667%20117.333333%20116.394666%20117.333334h412.522667c84.736%200%20160.373333-53.568%20189.12-133.92l85.696-239.584c21.802667-60.96-9.536-128.202667-70.005333-150.186667a115.552%20115.552%200%200%200-39.488-6.954667H621.674667zM544.256%20149.333333c39.253333%200%2059.498667%2036.48%2049.888%2084.928-7.573333%2038.144-21.984%20104.426667-43.221333%20198.666667-4.512%2020.021333%2010.56%2039.093333%2030.912%2039.093333h218.666666c6.101333%200%2012.16%201.066667%2017.909334%203.168%2027.445333%209.984%2041.674667%2040.554667%2031.776%2068.266667l-85.568%20239.573333C744.981333%20838.026667%20693.301333%20874.666667%20635.402667%20874.666667H223.498667C194.314667%20874.666667%20170.666667%20850.784%20170.666667%20821.333333V503.498667c0-17.866667%2014.144-32.448%2031.829333-32.821334l21.866667-0.469333a221.12%20221.12%200%200%200%20167.381333-82.56c34.346667-42.602667%2059.146667-99.306667%2074.869333-169.877333C482.101333%20166.336%20499.552%20149.333333%20544.266667%20149.333333z'%20fill='%23000000'%20p-id='4203'%3e%3c/path%3e%3c/svg%3e",T="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1737793284889'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='8120'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M621.674667%20408.021333c16.618667-74.24%2028.224-127.936%2034.837333-161.194666C673.152%20163.093333%20629.941333%2085.333333%20544.298667%2085.333333c-77.226667%200-116.010667%2038.378667-138.88%20115.093334l-0.586667%202.24c-13.728%2062.058667-34.72%20110.165333-62.506667%20144.586666a158.261333%20158.261333%200%200%201-119.733333%2058.965334l-21.909333%200.469333C148.437333%20407.808%20106.666667%20450.816%20106.666667%20503.498667V821.333333c0%2064.8%2052.106667%20117.333333%20116.394666%20117.333334h412.522667c84.736%200%20160.373333-53.568%20189.12-133.92l85.696-239.584c21.802667-60.96-9.536-128.202667-70.005333-150.186667a115.552%20115.552%200%200%200-39.488-6.954667H621.674667z'%20fill='%23d81e06'%20p-id='8121'%3e%3c/path%3e%3c/svg%3e",x="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1737986477297'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='5068'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M335.008%20916.629333c-35.914667%2022.314667-82.88%2010.773333-104.693333-25.557333a77.333333%2077.333333%200%200%201-8.96-57.429333l46.485333-198.24a13.141333%2013.141333%200%200%200-4.021333-12.864l-152.16-132.586667c-31.605333-27.52-35.253333-75.648-8.234667-107.733333a75.68%2075.68%200%200%201%2051.733333-26.752L354.848%20339.2c4.352-0.362667%208.245333-3.232%2010.026667-7.594667l76.938666-188.170666c16.032-39.2%2060.618667-57.92%2099.52-41.461334a76.309333%2076.309333%200%200%201%2040.832%2041.461334l76.938667%20188.16c1.781333%204.373333%205.674667%207.253333%2010.026667%207.605333l199.712%2016.277333c41.877333%203.413333%2072.885333%2040.458667%2069.568%2082.517334a76.938667%2076.938667%200%200%201-26.08%2051.978666l-152.16%20132.586667c-3.541333%203.082667-5.141333%208.074667-4.021334%2012.853333l46.485334%20198.24c9.621333%2041.013333-15.36%2082.336-56.138667%2092.224a75.285333%2075.285333%200%200%201-57.525333-9.237333l-170.976-106.24a11.296%2011.296%200%200%200-12.010667%200l-170.986667%20106.24zM551.786667%20756.032l170.976%20106.24c2.624%201.621333%205.717333%202.122667%208.650666%201.408%206.410667-1.557333%2010.56-8.426667%208.928-15.424l-46.485333-198.24a77.141333%2077.141333%200%200%201%2024.277333-75.733333L870.293333%20441.706667c2.485333-2.165333%204.053333-5.312%204.330667-8.746667%200.565333-7.136-4.490667-13.173333-10.976-13.696l-199.712-16.288a75.989333%2075.989333%200%200%201-64.064-47.168l-76.938667-188.16a12.309333%2012.309333%200%200%200-6.538666-6.741333c-5.898667-2.496-12.725333%200.373333-15.328%206.741333l-76.949334%20188.16a75.989333%2075.989333%200%200%201-64.064%2047.168l-199.701333%2016.288a11.68%2011.68%200%200%200-7.978667%204.181333%2013.226667%2013.226667%200%200%200%201.333334%2018.261334l152.16%20132.586666a77.141333%2077.141333%200%200%201%2024.277333%2075.733334l-46.485333%20198.229333a13.333333%2013.333333%200%200%200%201.514666%209.877333c3.488%205.792%2010.581333%207.530667%2016.064%204.128l170.986667-106.229333a75.296%2075.296%200%200%201%2079.562667%200z'%20fill='%23000000'%20p-id='5069'%3e%3c/path%3e%3c/svg%3e",y="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1737793250919'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='7073'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M777.312598%20940.007027c-3.184529%200-6.380314-0.759293-9.307993-2.297322L512.694825%20803.484677%20257.385045%20937.708682c-6.741541%203.543709-14.909571%202.952238-21.070898-1.52268-6.161327-4.475941-9.246595-12.062733-7.959276-19.568684l48.759517-284.289812L70.566172%20430.990988c-5.453199-5.316076-7.4159-13.268188-5.062296-20.511149%202.353604-7.242961%208.614192-12.521175%2016.150842-13.616112l285.444101-41.47767L494.753197%2096.730065c3.370771-6.828522%2010.326183-11.153014%2017.941628-11.153014%207.615445%200%2014.570857%204.323469%2017.941628%2011.153014l127.654378%20258.655991%20285.444101%2041.47767c7.53665%201.094938%2013.797237%206.373151%2016.150842%2013.616112%202.353604%207.242961%200.390903%2015.19405-5.062296%2020.511149l-206.54924%20201.335495%2048.759517%20284.289812c1.287319%207.505951-1.798972%2015.092743-7.959276%2019.568684C785.589099%20938.717661%20781.461081%20940.007027%20777.312598%20940.007027z'%20fill='%23d81e06'%20p-id='7074'%3e%3c/path%3e%3c/svg%3e",q={class:"content"},j={class:"head"},A={class:"post-avatar"},J=["src"],K={class:"post-user"},Q={class:"body"},X={class:"post-title"},Z={class:"post-content"},s0={class:"images"},t0=["src"],e0={class:"foot"},o0={class:"post-category"},a0={class:"post-time"},i0={class:"shareBar"},c0={class:"like"},l0=["src"],n0={class:"favorite"},r0=["src"],d0=["src"],v0=P({__name:"content",props:{post:{type:Object,default:()=>({title:"",content:"",images:[],status:0,categoryID:0,likeNums:0,favoriteNms:0,isLiked:!1,isFavorite:!1,createdAt:"",username:"",nickname:"",avatar:""})}},setup(a){const v=n(null),h=()=>{var o;(o=v.value)==null||o.openModal()},t=a,r=n(f),i=n(x),e=n(t.post.likeNums),u=n(t.post.favoriteNms),p=S.getInstance(),_=n(""),m=n("");B(async()=>{let o=await p.Get(`/api/Post/Categories/${t.post.categoryID}`,!1);_.value=o.category.name,t.post.isLiked?r.value=T:r.value=f,t.post.isFavorite?i.value=y:i.value=x});const E=()=>{var o;navigator.clipboard?((o=navigator.clipboard)==null||o.writeText(window.location.href),m.value="复制成功，快去分享吧..."):m.value="您的浏览器不支持复制链接，请手动复制分享",h()},M=async()=>{t.post.isLiked?(await p.Get("/api/Post/Unlike?postId="+t.post.id,!0,()=>{alert("文章不存在")})).success&&(t.post.isLiked=!1,r.value=f,e.value--):(await p.Get("/api/Post/Like?postId="+t.post.id,!0,()=>{alert("文章不存在")})).success&&(t.post.isLiked=!0,r.value=T,e.value++)},F=async()=>{t.post.isFavorite?(await p.Get("/api/Post/UnFavorite?postId="+t.post.id,!0,()=>{alert("文章不存在")})).success&&(t.post.isFavorite=!1,i.value=x,u.value--):(await p.Get("/api/Post/Favorite?postId="+t.post.id,!0,()=>{alert("文章不存在")})).success&&(t.post.isFavorite=!0,i.value=y,u.value++)};return(o,c)=>{var k,C,D,I,G,L;return d(),g("div",q,[s("div",j,[s("div",A,[s("img",{src:(k=a.post)==null?void 0:k.avatar,alt:"用户头像"},null,8,J)]),s("div",K,l((C=a.post)==null?void 0:C.nickname),1)]),s("div",Q,[s("div",X,l((D=a.post)==null?void 0:D.title),1),s("div",Z,l((I=a.post)==null?void 0:I.content),1)]),s("div",s0,[(d(!0),g(z,null,U((G=a.post)==null?void 0:G.images,w=>(d(),g("img",{src:w,alt:"图片",width:"30%"},null,8,t0))),256))]),s("div",e0,[s("div",o0,l(_.value),1),s("div",a0,l((L=a.post)==null?void 0:L.createdAt.replace("T"," ")),1)]),s("div",i0,[s("div",c0,[s("img",{src:r.value,alt:"点赞",width:"30px",onClick:c[0]||(c[0]=w=>M())},null,8,l0),V(" "+l(e.value),1)]),s("div",n0,[s("img",{src:i.value,alt:"收藏",width:"30px",onClick:c[1]||(c[1]=w=>F())},null,8,r0),V(" "+l(u.value),1)]),s("div",{class:"share",onClick:c[2]||(c[2]=w=>E())},[s("img",{src:$(Y),alt:"分享",width:"30px"},null,8,d0)])]),H(W,{ref_key:"modalRef",ref:v},{default:O(()=>[c[3]||(c[3]=s("h2",null,"提示",-1)),s("p",null,l(m.value),1)]),_:1},512)])}}}),p0=N(v0,[["__scopeId","data-v-ee37c39a"]]),g0={class:"detail"},w0={key:1},h0=P({__name:"postDetail",setup(a){const v=b(),h=S.getInstance(),t=n(null),r=async i=>{try{const e=await h.Get("/api/Post/"+i,!1);e.success?t.value=e.post:console.error("Failed to load post:",e)}catch(e){console.error("Error fetching post:",e)}};return B(()=>{v.params.id&&r(v.params.id.toString())}),(i,e)=>(d(),g("div",g0,[e[0]||(e[0]=s("div",{class:"head"},[s("h3",null,"帖子详情")],-1)),t.value?(d(),R(p0,{key:0,post:t.value},null,8,["post"])):(d(),g("div",w0," Loading... "))]))}}),x0=N(h0,[["__scopeId","data-v-cd074e40"]]);export{x0 as default};
