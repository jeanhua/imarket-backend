import{R as k}from"./request-BB6PRwq2.js";import{d as D,u as C,r as p,i as E,p as L,o as d,c as u,F as M,j as $,k as g,e,t as r,f as w,q as x,_ as y}from"./index-BkUlVtEz.js";const N="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1737712595846'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='2307'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M1021.745656%20389.07432c-4.349051-13.047154-15.477506-22.511713-29.03529-24.559349l-308.782645-47.712675L546.036187%2021.452591C540.02324%208.66024%20527.103999%200.346901%20512.905626%200.346901l0%200c-14.19735%200-26.988678%208.18645-33.128515%2020.9788l-139.169643%20294.584272L31.442106%20362.597295c-13.558807%202.047636-24.815175%2011.384281-29.16525%2024.431435-4.349051%2012.919241-1.151219%2027.373441%208.442276%2037.09485l224.358861%20230.755548-53.594639%20325.283458c-2.302439%2013.814634%203.580548%2027.757181%2014.96483%2035.815717%2011.383258%208.058536%2026.479071%208.953929%2038.757722%202.174526L511.37169%20866.190835l275.525194%20152.984277c5.628184%202.942005%2011.641131%204.476965%2017.779945%204.476965l0.76748%200c20.211321%200%2036.45426-16.372899%2036.45426-36.583197%200-4.476965-0.76748-8.827039-2.302439-12.919241l-51.16531-318.248228%20224.873584-229.861178C1022.768963%20416.319847%201026.094708%20401.99356%201021.745656%20389.07432L1021.745656%20389.07432z'%20fill='%23845555'%20p-id='2308'%3e%3c/path%3e%3c/svg%3e",T="/assets/%E7%82%B9%E8%B5%9E-DeKDEPLv.svg";class B{static Convert(m){const h=new Date(m),l=new Date().getTime()-h.getTime(),s=Math.floor(l/1e3),o=Math.floor(s/60),c=Math.floor(o/60),a=Math.floor(c/24),i=Math.floor(a/30),n=Math.floor(i/12);return n>0?`${n}年前`:i>0?`${i}个月前`:a>0?`${a}天前`:c>0?`${c}小时前`:o>0?`${o}分钟前`:`${s}秒前`}}const S={class:"post-body"},V=["onClick"],b={class:"post-header"},G={class:"post-header-left"},P=["src"],U={class:"post-header-left-text"},q={class:"post-header-left-text-nickname"},I={class:"post-header-left-text-time"},O={class:"post-header-right"},R={class:"post-header-right-favoriteNums"},W={class:"post-header-right-likeNums"},z={class:"post-title"},F={class:"post-content"},H={key:0,class:"loading"},j={key:1,class:"no-more"},A=D({__name:"postList",props:{Url:String},setup(_){const m=C(),h=p(1),f=k.getInstance(),l=p([]),s=p(!1),o=p(!0),c=_,a=async()=>{if(s.value||!o.value)return;s.value=!0;let n=await f.Get(`${c.Url}page=${h.value}&pageSize=10`,!1);n.success&&n.posts.length>0?(l.value=[...l.value,...n.posts],h.value++):o.value=!1,s.value=!1},i=()=>{document.documentElement.scrollTop+window.innerHeight>=document.documentElement.offsetHeight-100&&!s.value&&o.value&&a()};return E(()=>{window.addEventListener("scroll",i),a()}),L(()=>{window.removeEventListener("scroll",i)}),(n,v)=>(d(),u("div",S,[(d(!0),u(M,null,$(l.value,t=>(d(),u("div",{key:t.id,onClick:K=>{g(m).push("/post/"+t.id)},class:"post"},[e("div",b,[e("div",G,[e("img",{src:t.avatar,alt:"",width:"30px",height:"30px"},null,8,P),e("div",U,[e("div",q,r(t.nickname),1),e("div",I,r(g(B).Convert(t.createdAt)),1)])]),e("div",O,[e("div",R,[v[0]||(v[0]=e("img",{src:N,alt:"收藏",width:"20px",height:"20px"},null,-1)),w(" "+r(t.favoriteNums),1)]),e("div",W,[v[1]||(v[1]=e("img",{src:T,alt:"点赞",width:"20px",height:"20px"},null,-1)),w(" "+r(t.likeNums),1)])])]),e("div",z,r(t.title),1),e("div",F,r(t.content),1)],8,V))),128)),s.value?(d(),u("div",H,"加载中...")):x("",!0),o.value?x("",!0):(d(),u("div",j,"没有更多帖子了"))]))}}),Q=y(A,[["__scopeId","data-v-b67c3211"]]);export{Q as p};
